# TW_GR_E4_STW

> Many saw the fourth installment of Toaster Wars: Going Rogue as a return to grace after the relative mediocrity of the third. I'm just glad it was made at all. And hey, they added some nifty new online scoreboard features, too!

Hints:

> Ooh, what a nifty scoreboard! If we get a bunch of people playing at once, we can have a race through the dungeon!

The hint subtly tells us that this challenge is about race condition. As always we'll start with analysis of source code.
In game.js there is something strange:
```js
socket.on("action", function(action){
/* not important* /
	if(state.player.location.r == state.map.stairs.r && state.player.location.c == state.map.stairs.c){
		db.scoreboard[socket.id].floor++;
```
They immediately increment our floor once we get to the stairs (in previous episodes they firstly generated new level and after it loaded they incremented this variable).
It means that if we can get to stairs twice (or even more times) before next level loads we'll just skip some levels.
So what we need to do is to proceed to 3rd level, stand on the left side of the stairs (if possible) and then execute the following command in dev console.
```js
socket.emit("action", {type: "move",direction: 0});socket.emit("action", {type: "move",direction: 4});socket.emit("action", {type: "move",direction: 0});
```
0 is move right and 4 is move left (of course it can be any other valid move).
In most cases it will work and you will be teleported to 5th level. (sometimes it doesn't work and you have to play again from beginning)
You can try to use this cheat on some earlier levels, but it often causes level not to generate properly and in result unplayable.

The flag is `im_still_upset_you_dont_get_to_keep_the_cute_scarves_in_the_postgame_33afc86a6e39c906a4ae54caddbd0e8d`.